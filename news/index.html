<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • bonsai</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://bonsai.tidymodels.org/logo.png"><script defer data-domain="bonsai.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bonsai</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/bonsai.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/bonsai/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidymodels/bonsai/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.2" id="bonsai-032">bonsai 0.3.2<a class="anchor" aria-label="anchor" href="#bonsai-032"></a></h2><p class="text-muted">CRAN release: 2025-02-11</p>
<ul><li><p>Resolves a test failure ahead of an upcoming parsnip release (<a href="https://github.com/tidymodels/bonsai/issues/95" class="external-link">#95</a>).</p></li>
<li><p>lightgbm models can now accept sparse matrices for training and prediction (<a href="https://github.com/tidymodels/bonsai/issues/91" class="external-link">#91</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.1" id="bonsai-031">bonsai 0.3.1<a class="anchor" aria-label="anchor" href="#bonsai-031"></a></h2><p class="text-muted">CRAN release: 2024-07-23</p>
<ul><li>Fixed bug where <code>"aorsf"</code> models would not successfully fit in socket cluster workers (i.e. with <code>plan(multisession)</code>) unless another engine requiring bonsai had been fitted in the worker (<a href="https://github.com/tidymodels/bonsai/issues/85" class="external-link">#85</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="bonsai-030">bonsai 0.3.0<a class="anchor" aria-label="anchor" href="#bonsai-030"></a></h2><p class="text-muted">CRAN release: 2024-06-23</p>
<ul><li><p>Introduced support for accelerated oblique random forests for the <code>"classification"</code> and <code>"regression"</code> modes using the new <a href="https://github.com/ropensci/aorsf" class="external-link"><code>"aorsf"</code> engine</a> (<a href="https://github.com/tidymodels/bonsai/issues/78" class="external-link">#78</a> by <code>@bcjaeger</code>).</p></li>
<li><p>Enabled passing <a href="https://lightgbm.readthedocs.io/en/latest/Parameters.html#dataset-parameters" class="external-link">Dataset Parameters</a> to the <code>"lightgbm"</code> engine. To pass an argument that would be usually passed as an element to the <code>param</code> argument in <code><a href="https://rdrr.io/pkg/lightgbm/man/lgb.Dataset.html" class="external-link">lightgbm::lgb.Dataset()</a></code>, pass the argument directly through the ellipses in <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code>, e.g. <code>boost_tree() %&gt;% set_engine("lightgbm", linear_tree = TRUE)</code> (<a href="https://github.com/tidymodels/bonsai/issues/77" class="external-link">#77</a>).</p></li>
<li><p>Enabled case weights with the <code>"lightgbm"</code> engine (<a href="https://github.com/tidymodels/bonsai/issues/72" class="external-link">#72</a> by <code>@p-schaefer</code>).</p></li>
<li><p>Fixed issues in metadata for the <code>"partykit"</code> engine for <code><a href="https://parsnip.tidymodels.org/reference/rand_forest.html" class="external-link">rand_forest()</a></code> where some engine arguments were mistakenly protected (<a href="https://github.com/tidymodels/bonsai/issues/74" class="external-link">#74</a>).</p></li>
<li><p>Addressed type check error when fitting lightgbm model specifications with arguments mistakenly left as <code><a href="https://hardhat.tidymodels.org/reference/tune.html" class="external-link">tune()</a></code> (<a href="https://github.com/tidymodels/bonsai/issues/79" class="external-link">#79</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="bonsai-021">bonsai 0.2.1<a class="anchor" aria-label="anchor" href="#bonsai-021"></a></h2><p class="text-muted">CRAN release: 2022-11-29</p>
<ul><li>The most recent dials and parsnip releases introduced tuning integration for the lightgbm <code>num_leaves</code> engine argument! The <code>num_leaves</code> parameter sets the maximum number of nodes per tree, and is an <a href="https://lightgbm.readthedocs.io/en/latest/Parameters-Tuning.html" class="external-link">important tuning parameter for lightgbm</a> (<a href="https://github.com/tidymodels/dials/pull/256" class="external-link">tidymodels/dials#256</a>, <a href="https://github.com/tidymodels/parsnip/pull/838" class="external-link">tidymodels/parsnip#838</a>). With the newest version of each of dials, parsnip, and bonsai installed, tune this argument by marking the <code>num_leaves</code> engine argument for tuning when defining your model specification:</li>
</ul><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html" class="external-link">boost_tree</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"lightgbm"</span>, num_leaves <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html" class="external-link">tune</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul><li>Fixed a bug where lightgbm’s parallelism argument <code>num_threads</code> was overridden when passed via <code>param</code> rather than as a main argument. By default, then, lightgbm will fit sequentially rather than with <code>num_threads = foreach::getDoParWorkers()</code>. The user can still set <code>num_threads</code> via engine arguments with <code>engine = "lightgbm"</code>:</li>
</ul><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html" class="external-link">boost_tree</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"lightgbm"</span>, num_threads <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Note that, when tuning hyperparameters with the tune package, detection of parallel backend will still work <a href="https://tune.tidymodels.org/articles/extras/optimizations.html" class="external-link">as usual</a>.</p>
<ul><li><p>The <code>boost_tree</code> argument <code>stop_iter</code> now maps to the <code>lightgbm:::lgb.train()</code> argument <code>early_stopping_round</code> rather than its alias <code>early_stopping_rounds</code>. This does not affect parsnip’s interface to lightgbm (i.e. via <code>boost_tree() %&gt;% set_engine("lightgbm")</code>), though will introduce errors for code that uses the <code><a href="../reference/train_lightgbm.html">train_lightgbm()</a></code> wrapper directly and sets the <code><a href="https://rdrr.io/pkg/lightgbm/man/lgb.train.html" class="external-link">lightgbm::lgb.train()</a></code> argument <code>early_stopping_round</code> by its alias <code>early_stopping_rounds</code> via <code><a href="../reference/train_lightgbm.html">train_lightgbm()</a></code>’s <code>...</code>.</p></li>
<li><p>Disallowed passing main model arguments as engine arguments to <code>set_engine("lightgbm", ...)</code> via aliases. That is, if a main argument is marked for tuning and a lightgbm alias is supplied as an engine argument, bonsai will now error, rather than supplying both to lightgbm and allowing the package to handle aliases. Users can still interface with non-main <code><a href="https://parsnip.tidymodels.org/reference/boost_tree.html" class="external-link">boost_tree()</a></code> arguments via their lightgbm aliases (<a href="https://github.com/tidymodels/bonsai/issues/53" class="external-link">#53</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="bonsai-020">bonsai 0.2.0<a class="anchor" aria-label="anchor" href="#bonsai-020"></a></h2><p class="text-muted">CRAN release: 2022-08-31</p>
<ul><li>Enabled bagging with lightgbm via the <code>sample_size</code> argument to <code>boost_tree</code> (<a href="https://github.com/tidymodels/bonsai/issues/32" class="external-link">#32</a> and tidymodels/parsnip#768). The following docs now available in <code><a href="https://parsnip.tidymodels.org/reference/details_boost_tree_lightgbm.html" class="external-link">?details_boost_tree_lightgbm</a></code> describe the interface in detail:</li>
</ul><blockquote>
<p>The <code>sample_size</code> argument is translated to the <code>bagging_fraction</code> parameter in the <code>param</code> argument of <code>lgb.train</code>. The argument is interpreted by lightgbm as a <em>proportion</em> rather than a count, so bonsai internally reparameterizes the <code>sample_size</code> argument with [dials::sample_prop()] during tuning.</p>
<p>To effectively enable bagging, the user would also need to set the <code>bagging_freq</code> argument to lightgbm. <code>bagging_freq</code> defaults to 0, which means bagging is disabled, and a <code>bagging_freq</code> argument of <code>k</code> means that the booster will perform bagging at every <code>k</code>th boosting iteration. Thus, by default, the <code>sample_size</code> argument would be ignored without setting this argument manually. Other boosting libraries, like xgboost, do not have an analogous argument to <code>bagging_freq</code> and use <code>k = 1</code> when the analogue to <code>bagging_fraction</code> is in <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(0, 1)</annotation></semantics></math>. <em>bonsai will thus automatically set</em> <code>bagging_freq = 1</code> <em>in</em> <code>set_engine("lightgbm", ...)</code> if <code>sample_size</code> (i.e. <code>bagging_fraction</code>) is not equal to 1 and no <code>bagging_freq</code> value is supplied. This default can be overridden by setting the <code>bagging_freq</code> argument to <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code> manually.</p>
</blockquote>
<ul><li>
<p>Corrected mapping of the <code>mtry</code> argument in <code>boost_tree</code> with the lightgbm engine. <code>mtry</code> previously mapped to the <code>feature_fraction</code> argument to <code>lgb.train</code> but was documented as mapping to an argument more closely resembling <code>feature_fraction_bynode</code>. <code>mtry</code> now maps to <code>feature_fraction_bynode</code>.</p>
<p>This means that code that set <code>feature_fraction_bynode</code> as an argument to <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code> will now error, and the user can now pass <code>feature_fraction</code> to <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code> without raising an error.</p>
</li>
<li><p>Fixed error in lightgbm with engine argument <code>objective = "tweedie"</code> and response values less than 1.</p></li>
<li><p>A number of documentation improvements, increases in testing coverage, and changes to internals in anticipation of the 4.0.0 release of the lightgbm package. Thank you to <code>@jameslamb</code> for the effort and expertise!</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="bonsai-010">bonsai 0.1.0<a class="anchor" aria-label="anchor" href="#bonsai-010"></a></h2><p class="text-muted">CRAN release: 2022-06-23</p>
<p>Initial release!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Daniel Falbel, Athos Damiani, Roel M. Hogervorst, <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, Simon Couch, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

